<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>Map â€” Cells</title>
    <link rel="stylesheet" href="css/style.css" />
  </head>
  <body>
    <!-- Set the data file here (URL-encode spaces when necessary) -->
    <main
      id="app"
      class="app"
      data-geojson="Mia%20Cells%202025-12-23.geojson"
      data-preload-snapshots="false"
      data-sigils="data/sigils.json"
      data-tracks="data/tracks.json"
    >
      <section class="map-pane" aria-label="Map view">
        <img class="arc-title" src="assets/backgrounds/TYPOWORKS8.svg" alt="" aria-hidden="true" />
        <!-- Info button - hidden until map completion -->
        <button class="info-button" id="info-button" type="button" aria-label="Credits and information">
          <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <circle cx="12" cy="12" r="10"/>
            <line x1="12" y1="16" x2="12" y2="12"/>
            <line x1="12" y1="8" x2="12.01" y2="8"/>
          </svg>
        </button>
        <div class="state-3d-stack" id="state-3d-stack" aria-hidden="true">
          <div class="state-3d-slot">
            <canvas id="state-3d-canvas" aria-hidden="true"></canvas>
          </div>
          <div class="sigil-3d-slot">
            <canvas id="sigil-3d-canvas" aria-hidden="true"></canvas>
          </div>
        </div>
        <div class="three-toggle" id="three-toggle" aria-hidden="true">
          <button class="toggle-button" type="button" data-3d-target="state" aria-pressed="true">
            State
          </button>
          <button class="toggle-button" type="button" data-3d-target="sigil" aria-pressed="false">
            Sigil
          </button>
        </div>
        <svg
          id="map-svg"
          xmlns="http://www.w3.org/2000/svg"
          preserveAspectRatio="xMidYMid meet"
          role="img"
          aria-label="Map"
        ></svg>
      </section>
      <aside class="info-pane" id="info-pane" aria-hidden="true">
        <header class="info-header">
          <button class="back-button" id="state-back" type="button" hidden>
            Back to full map
          </button>
        </header>
        <div id="state-content"></div>
      </aside>
    </main>
    <div class="loading-screen" id="loading-screen" aria-hidden="false">
      <div class="loading-card">
        <div class="loading-title">Preparing the map</div>
        <div class="loading-subtitle" id="loading-progress">Loading...</div>
      </div>
    </div>

    <div class="character-select" id="character-select" aria-hidden="true">
      <div class="character-select-card">
        <h2 class="character-select-title">Choose your character</h2>
        <div class="character-grid">
          <button class="character-card" type="button" data-character="demon">
            <img class="character-card-img" src="assets/characters/demon.svg" alt="Demon" />
            <span class="character-name">Demon</span>
          </button>
          <button class="character-card" type="button" data-character="succube">
            <img class="character-card-img" src="assets/characters/succube.svg" alt="Succube" />
            <span class="character-name">Succube</span>
          </button>
          <button class="character-card" type="button" data-character="gargoyle">
            <img class="character-card-img" src="assets/characters/gargoyle.svg" alt="Gargoyle" />
            <span class="character-name">Gargoyle</span>
          </button>
        </div>
        <button class="character-confirm" id="character-confirm" type="button" hidden>Confirm</button>
      </div>
    </div>

    <div class="question-modal" id="question-modal" aria-hidden="true">
      <div class="question-card">
        <h2 class="question-title" id="question-text">Which direction do you explore?</h2>
        <div class="question-answers">
          <button class="answer-btn" id="answer-btn-1" type="button">Answer A</button>
          <button class="answer-btn" id="answer-btn-2" type="button">Answer B</button>
        </div>
      </div>
    </div>

    <!-- Credits Modal -->
    <div class="credits-modal" id="credits-modal" aria-hidden="true">
      <div class="credits-content">
        <button class="credits-close" id="credits-close" type="button" aria-label="Close credits">
          <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <line x1="18" y1="6" x2="6" y2="18"/>
            <line x1="6" y1="6" x2="18" y2="18"/>
          </svg>
        </button>
        <h2 class="credits-title">Ataraxie Vol 1</h2>
        <p class="credits-subtitle">Interactive Map Experience</p>
        <p class="credits-text">Congratulations on discovering all territories!</p>
        <div class="credits-links">
          <a class="credits-link" href="https://ataraxie.bandcamp.com" target="_blank" rel="noopener noreferrer">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
              <path d="M0 18.75l6.75-11.5h17.25l-6.75 11.5z"/>
            </svg>
            <span>Bandcamp</span>
          </a>
          <a class="credits-link" href="https://soundcloud.com/ataraxie" target="_blank" rel="noopener noreferrer">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
              <path d="M1.175 12.225c-.051 0-.094.046-.101.1l-.233 2.154.233 2.105c.007.058.05.098.101.098.05 0 .09-.04.099-.098l.255-2.105-.27-2.154c-.009-.06-.052-.1-.099-.1zm-.899.828c-.06 0-.091.037-.104.094L0 14.479l.172 1.286c.013.055.045.094.104.094.057 0 .09-.039.104-.096l.205-1.284-.205-1.33c-.014-.057-.047-.096-.104-.096zm1.839-1.225c-.062 0-.107.051-.112.115l-.208 2.537.208 2.437c.005.064.05.113.112.113.06 0 .107-.049.111-.113l.239-2.437-.239-2.537c-.004-.064-.051-.115-.111-.115zm.947-.098c-.072 0-.121.058-.129.13l-.19 2.665.19 2.587c.008.07.057.129.129.129.07 0 .12-.059.127-.129l.217-2.587-.217-2.665c-.007-.072-.057-.13-.127-.13zm1.035-.23c-.081 0-.138.063-.145.143l-.174 2.894.174 2.717c.007.08.064.143.145.143.08 0 .137-.063.144-.143l.198-2.717-.198-2.893c-.007-.08-.064-.144-.144-.144zm1.073-.115c-.088 0-.153.07-.16.158l-.159 3.008.159 2.829c.007.088.072.157.16.157.087 0 .152-.069.16-.157l.18-2.829-.18-3.008c-.008-.088-.073-.158-.16-.158zm1.107-.158c-.097 0-.168.074-.175.171l-.144 3.166.144 2.916c.007.098.078.171.175.171.096 0 .168-.073.175-.171l.164-2.916-.164-3.166c-.007-.097-.079-.171-.175-.171zm1.142-.134c-.104 0-.181.082-.188.186l-.128 3.3.128 2.989c.007.104.084.186.188.186.104 0 .18-.082.188-.186l.146-2.989-.146-3.3c-.008-.104-.084-.186-.188-.186zm1.172-.127c-.113 0-.196.088-.201.2l-.114 3.428.114 3.046c.005.112.088.199.201.199.113 0 .195-.087.201-.199l.128-3.046-.128-3.427c-.006-.113-.088-.2-.201-.2zm1.21-.147c-.12 0-.208.093-.214.212l-.099 3.574.099 3.089c.006.119.094.212.214.212.12 0 .208-.093.213-.212l.113-3.089-.113-3.574c-.005-.119-.093-.212-.213-.212zm1.247-.144c-.128 0-.22.099-.225.227l-.085 3.718.085 3.121c.005.128.097.227.225.227.127 0 .22-.099.224-.227l.096-3.121-.096-3.718c-.004-.128-.097-.227-.224-.227zm1.287-.127c-.136 0-.235.106-.24.241l-.07 3.845.07 3.155c.005.136.104.241.24.241.137 0 .235-.105.24-.241l.08-3.155-.08-3.845c-.005-.135-.103-.241-.24-.241zm1.324-.126c-.143 0-.248.112-.253.255l-.055 3.971.055 3.187c.005.143.11.255.253.255.144 0 .248-.112.253-.255l.063-3.187-.063-3.971c-.005-.143-.109-.255-.253-.255zm1.364-.139c-.152 0-.261.119-.266.27l-.04 4.11.04 3.207c.005.152.114.269.266.269.15 0 .26-.117.265-.27l.046-3.206-.046-4.11c-.005-.152-.115-.27-.265-.27zm2.756 1.32c-.161 0-.291.13-.291.291v6.854c0 .161.13.291.291.291h9.454c2.104 0 3.811-1.706 3.811-3.811 0-2.104-1.706-3.811-3.811-3.811-.68 0-1.326.178-1.883.49-.364-2.087-2.184-3.674-4.381-3.674-1.047 0-2.004.368-2.756.977v3.393c-.003 0-.265-.001-.434 0z"/>
            </svg>
            <span>SoundCloud</span>
          </a>
          <a class="credits-link" href="https://instagram.com/ataraxie" target="_blank" rel="noopener noreferrer">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <rect x="2" y="2" width="20" height="20" rx="5" ry="5"/>
              <path d="M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z"/>
              <line x1="17.5" y1="6.5" x2="17.51" y2="6.5"/>
            </svg>
            <span>Instagram</span>
          </a>
        </div>
        <button class="credits-change-character" id="credits-change-character" type="button">Change character</button>
        <p class="credits-footer">&copy; 2025 Ataraxie</p>
      </div>
    </div>

    <!-- Confetti library -->
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.9.3/dist/confetti.browser.min.js"></script>
    <script src="js/app.js" type="module"></script>
  </body>
</html>
